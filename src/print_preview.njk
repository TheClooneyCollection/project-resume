---
layout: layout.njk
permalink: print_preview/index.html
---

<header>
    <h1>{{ cv.name }}</h1>
    <div class="contact-info">
        {% set contactEmail = (contact and contact.email) or '' %}
        {% set contactPhone = (contact and contact.phone) or '' %}
        {% set contactPhoneHref = contactPhone | replace(' ', '') | replace('(', '') | replace(')', '') %}
        {% if contactEmail %}<span><a href="mailto:{{ contactEmail }}">{{ contactEmail }}</a></span>{% endif %}
        {% if contactPhone %}<span><a href="tel:{{ contactPhoneHref }}">{{ contactPhone }}</a></span>{% endif %}
        <span><a href="{{ cv.contact.website }}" target="_blank" rel="noopener">{{ cv.contact.website | replace('https://', '') | replace('http://', '') | replace('www.', '') | trim }}</a></span>
    </div>
</header>

<section class="summary">
    <p>{{ cv.summary }}</p>
</section>

{% set sectionsConfig = cv.sections or {} %}
{% set enabledSections = sectionsConfig.enabled or [] %}
{% set disabledSections = sectionsConfig.disabled or [] %}
{% set hasEnabledOverrides = (enabledSections | length) > 0 %}
{% set showSkills = ('skills' not in disabledSections) and (not hasEnabledOverrides or 'skills' in enabledSections) %}
{% set showExperience = ('experiences' not in disabledSections) and (not hasEnabledOverrides or 'experiences' in enabledSections) %}
{% set showProjects = ('projects' not in disabledSections) and (not hasEnabledOverrides or 'projects' in enabledSections) %}
{% set showInterests = ('interests' not in disabledSections) and (not hasEnabledOverrides or 'interests' in enabledSections) %}

{% if showSkills and cv.skills %}
<section class="skills">
    <h2>Core Skills</h2>
    <div class="skills-grid">
        {% for skill in cv.skills %}
        <div class="skill">
            <h3>{{ skill.label }}</h3>
            {% if skill.items %}
            <p class="skill-items">{{ skill.items | join(', ') }}</p>
            {% elseif skill.description %}
            <p>{{ skill.description }}</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

{% if showExperience and cv.experience %}
<section class="professional-experience">
    <h2>Professional Experience</h2>
    {% set currentEnvironment = environment or 'development' %}
    {% set shouldFilter = currentEnvironment == 'development' %}
    {% set includedTags = (cv.tags and cv.tags.included) or [] %}
    {% set excludedTags = (cv.tags and cv.tags.excluded) or [] %}
    {% set includedSet = includedTags | toSet %}
    {% set excludedSet = excludedTags | toSet %}
    {% set includeAllTags = includedSet.has('all') %}
    {% for job in cv.experience %}
    <div class="job">
        <div class="job-header">
            <h3>
                {{ job.title }}{% if job.company %} &middot; {{ job.company }}{% endif %}{% if job.location %} &middot; {{ job.location }}{% endif %}
            </h3>
            <span class="dates">{{ job.startDate }} â€“ {{ job.endDate }}</span>
        </div>
        {% if job.summary %}
        <p class="job-summary">{{ job.summary }}</p>
        {% endif %}
        <ul>
            {% for item in job.achievements %}
            {% set achievementText = item.text or item %}
            {% set achievementTags = item.tags or [] %}
            {% set achievementSet = achievementTags | toSet %}
            {% set shouldRender = true %}
            {% if shouldFilter %}
              {% set isExcluded = achievementSet.intersection(excludedSet).size > 0 %}
              {% set matchesIncluded = includeAllTags or achievementSet.intersection(includedSet).size > 0 %}
              {% set shouldRender = (not isExcluded) and matchesIncluded %}
            {% endif %}
            {% if shouldRender %}
            <li>{{ achievementText }}</li>
            {% endif %}
            {% endfor %}
        </ul>
    </div>
    {% endfor %}
</section>
{% endif %}

{% if showProjects and cv.openSourceProjects %}
<section class="open-source">
    <h2>Open Source Projects</h2>
    <ul class="project-list">
        {% set currentEnvironment = environment or 'development' %}
        {% set shouldFilter = currentEnvironment == 'development' %}
        {% set includedTags = (cv.tags and cv.tags.included) or [] %}
        {% set excludedTags = (cv.tags and cv.tags.excluded) or [] %}
        {% set includedSet = includedTags | toSet %}
        {% set excludedSet = excludedTags | toSet %}
        {% set includeAllTags = includedSet.has('all') %}
        {% for project in cv.openSourceProjects %}
        {% set projectTags = project.tags or [] %}
        {% set projectSet = projectTags | toSet %}
        {% set shouldRender = true %}
        {% if shouldFilter %}
            {% set isExcluded = projectSet.intersection(excludedSet).size > 0 %}
            {% set matchesIncluded = includeAllTags or projectSet.intersection(includedSet).size > 0 %}
            {% set shouldRender = (not isExcluded) and matchesIncluded %}
        {% endif %}
        {% if shouldRender %}
        <li>
            <h3><a href="{{ project.url }}" target="_blank" rel="noopener">{{ project.name }}</a></h3>
            <p>{{ project.description }}</p>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
</section>
{% endif %}

{% if showInterests and cv.interests %}
<section class="interests">
    <h2>Interests</h2>
    <ul>
        {% for interest in cv.interests %}
        <li>{{ interest }}</li>
        {% endfor %}
    </ul>
</section>
{% endif %}
